/**
 * @name css-background-video
 * @author makesites
 * Homepage: http://github.com/makesites/css-background-video
 * Version: 1.0.0 (Mon, 08 Apr 2019 17:29:39 GMT)
 * @license Apache License, Version 2.0
 */
!function(e,t){"use strict";var n=n||!1,o=o||!1;"function"==typeof n&&n.amd?n("background-video",[],t):"object"==typeof o&&o&&"object"==typeof o.exports?o.exports=t:t(e)}(this,function(s){var e=function(e){s.document=s.document||{},e=e||{},this.options=u.extend({},t,e),this.styles(),this.options.autoparse&&this.parse()},t={autoparse:!0,position:"absolute",attribute:"background",className:"css-background-video",dataClass:!1},c=function(e,t){for(var n in t=t||{},e){var o=e[n].rules||e[n].cssRules;for(var s in o)if(o[s].cssText&&-1!=o[s].cssText.search(this.options.attribute)&&-1!=o[s].cssText.search(/mp4|webm|ogv/g))if(o[s].media){var a=o[s].media[0];if(!u.mq(a))continue;t=c.bind(this)([o[s]],t)}else{var r=o[s].selectorText,i=o[s].cssText.match(/url\((.*?)\)/g);for(var d in i)i[d]=i[d].replace(/url\(|\)|'|"/g,"");t[r]=i}}return t},u={getType:function(e){return e.substr(e.lastIndexOf(".")+1).toLowerCase()},injectStyles:function(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id="css-background-video",n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)},extend:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();for(var n in e){var o=e[n];for(var s in o)o[s]&&o[s].constructor&&o[s].constructor===Object?(t[s]=t[s]||{},arguments.callee(t[s],o[s])):t[s]=o[s]}return t},mq:function(e,t,n){t=t||function(){};var o={};if(!(!window||!window.matchMedia||n)){var s=window.matchMedia(e);return t.apply(o,[s.matches,s.media]),s.addListener(function(e){t.apply(o,[e.matches,e.media])}),s.matches}}};e.prototype.events=function(e){e.addEventListener("error",function(e){this.load()},!1),e.addEventListener("canplaythrough",function(e){this.parentNode.style.background="none"},!1),e.addEventListener("play",function(e){this.setAttribute("data-state","play")},!1),e.addEventListener("pause",function(e){this.setAttribute("data-state","pause")},!1),e.addEventListener("ended",function(e){this.setAttribute("data-state","ended")},!1)},e.prototype.parse=function(){if(s.document.styleSheets){var e=s.document.styleSheets,t=c.bind(this)(e);for(var n in t){var o=s.document.querySelectorAll(n);this.render(o,t[n])}}},e.prototype.render=function(e,t){var n='<video autoplay muted loop class="'+this.options.className+'">';for(var o in t){var s=t[o];n+='<source src="'+s+'" type="video/'+u.getType(s)+'">'}n+="</video>",n=(n=(new DOMParser).parseFromString(n,"text/html")).getElementsByTagName("video")[0],this.events(n);for(var a=0;a<e.length;a++){for(var r=e[a],i=r.getElementsByClassName(this.options.className),d=0;d<i.length;d++)r.removeChild(i[d]);r.children?r.insertBefore(n,r.children[0]):r.appendChild(n)}},e.prototype.styles=function(){var e="",t=document.getElementById("css-background-video");if(t){if(-1<(e=t.innerHTML).search(this.options.className))return;t.parentNode.removeChild(t)}e+="."+this.options.className+" { position: "+this.options.position+"; top: 50%; left: 50%; -webkit-transform: translateX(-50%) translateY(-50%); transform: translateX(-50%) translateY(-50%); min-width: 100%; min-height: 100%; width: 100%; height: auto; z-index: -1000; overflow: hidden; }",u.injectStyles(e)};var n=s.css||{};if(n["background-video"]){var o="object"==typeof n["background-video"]?n["background-video"]:{};s.onload=function(){new e(o)}}return n["background-video"]=e,s.css=n,e});